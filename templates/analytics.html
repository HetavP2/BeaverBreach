{% extends "base.html" %}
 {% block head %} {% endblock %} 
 

<body class="h-screen bg-blue-100">
{% block content %}
  <!-- Main container -->
<div class="flex h-full">
  <table class="table-fixed">
  <thead>
    <tr>
      <th>Product Name</th>
      <th>Impact of Tariffs</th>
      <th>New Supplier</th>
      <th>Change in Cost with New Supplier</th>
      <th>Change in Carbon Footprint (KgCO2) with New Supplier</th>
      <th>Comments on New Supplier</th>
    </tr>
  </thead>
  <tbody>
    <!-- {% for row in all_rec %}
    <tr>
      <td>{{row['product_name']}}</td>
      <td>{{row['comments_on_other_factors']}}</td>
      <td>{{row['new_supplier']}}</td>
      <td>-{{row['og_price']-row['new_cost']}}</td>
      <td>{{row['comments_on_supplier_choice']}}</td>
      <td>{{row['new_carbon_footprint']}}</td>
    </tr>
    {% endfor %} -->
  </tbody>
</table>
  <!-- Left side (4 boxes 2x2, takes more space) -->
  <div class="w-2/3 p-4 grid grid-cols-5 gap-4">
    <!-- <div class="bg-blue-500 text-white flex items-center justify-center h-32 rounded-lg">Carbon Footprint</div>
    <div class="bg-blue-500 text-white flex items-center justify-center h-32 rounded-lg">Effect of Tariffs</div>
    <div class="bg-blue-500 text-white flex items-center justify-center h-32 rounded-lg">Money Saved</div>
    <div class="bg-blue-500 text-white flex items-center justify-center h-32 rounded-lg">Alternate Canadian Suppliers</div> -->
  
  </div>

  <!-- Right side (Smaller Chatbot) -->
  <div id="chat-container" class="w-1/3 h-screen flex flex-col mx-4">
    <div class="bg-white shadow-md rounded-lg flex-grow p-4 overflow-y-auto max-h-[80vh]">
      <!-- Chatbox -->
      <div id="chatbox" class="h-full overflow-y-auto">
        {% for i in range(chat_history|length) %}
          {% if chat_history[i].candidates[0].content.role == "model" %}
            <div class="mb-2 text-right">
              <p class="bg-blue-500 text-white rounded-lg py-2 px-4 inline-block">
                {{ messages[i] }}
              </p>
            </div>
            <div class="mb-2">
              <p class="bg-gray-200 text-gray-700 rounded-lg py-2 px-4 inline-block">
                {{ chat_history[i].text }}
              </p>
            </div>
          {% endif %}
        {% endfor %}
      </div>
    </div>

    <!-- Chat Input -->
    <form method="POST" enctype="multipart/form-data" class="p-4 border-t flex">
      {{ form2.hidden_tag() }}
      {{ form2.chat_prompt(id="user-input", type="text", placeholder="Type a message", class="w-full px-3 py-2 border rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
      {{ form2.submit(id="send-button", class="bg-blue-500 text-white px-4 py-2 rounded-r-md hover:bg-blue-600 transition duration-300") }}
    </form>
  </div>
</div>

{% endblock %}
{% block footer %}{% endblock %}

</body>
</html>


